# 🚀 部署步骤 - 超详细版（一步步跟着做）

## 📋 准备工作

你需要准备：
1. ✅ GitHub 账号（已经有了：orzlian）
2. Railway 账号（如果没有，去 https://railway.app 注册，用GitHub登录）
3. Vercel 账号（如果没有，去 https://vercel.com 注册，用GitHub登录）

---

## 第一步：部署后端服务（Railway）

### 1.1 登录 Railway
1. 打开浏览器，访问：https://railway.app
2. 点击右上角 "Login"
3. 选择 "Login with GitHub"
4. 授权 Railway 访问你的 GitHub

### 1.2 创建新项目
1. 登录后，点击页面上的 **"New Project"** 按钮（绿色大按钮）
2. 选择 **"Deploy from GitHub repo"**
3. 会显示你的 GitHub 仓库列表，找到并点击 **"orzlian/my-ai-app"**
4. 等待几秒，Railway 会开始部署

### 1.3 配置后端服务
1. 部署开始后，Railway 可能会问你要部署哪个文件夹
2. 如果问了，选择 **"backend"** 文件夹
3. 如果没有问，Railway 会自动检测（可能需要手动设置）

**如何设置根目录：**
- 在项目页面，点击后端服务
- 点击 "Settings" 标签
- 找到 "Root Directory" 或 "Source"
- 设置为：`backend`
- 保存

### 1.4 获取后端地址
1. 等待部署完成（通常需要 2-5 分钟）
2. 部署完成后，在服务页面会看到一个地址，类似：`https://xxx-production.up.railway.app`
3. **复制这个地址，保存好！** 这就是你的后端地址

### 1.5 配置环境变量（后端）
在 Railway 后端服务的 "Variables" 标签中，添加：
- `AI_SERVICE_URL` = 暂时留空，等 AI 服务部署好后再填

---

## 第二步：部署 AI 服务（Railway）

### 2.1 在同一个项目中添加新服务
1. 在 Railway 项目页面（就是你刚才部署后端的那个项目）
2. 点击 **"+ New"** 按钮（通常在左侧或顶部）
3. 选择 **"GitHub Repo"**
4. 再次选择 **"orzlian/my-ai-app"** 仓库
5. 这次选择 **"ai-service"** 文件夹作为根目录

### 2.2 配置 Python 环境
Railway 会自动检测到这是 Python 项目，会自动安装依赖。

### 2.3 获取 AI 服务地址
1. 等待部署完成（通常需要 2-5 分钟）
2. 部署完成后，复制 AI 服务的地址，类似：`https://yyy-production.up.railway.app`
3. **复制这个地址，保存好！**

### 2.4 更新后端环境变量
1. 回到后端服务的 "Variables" 标签
2. 找到 `AI_SERVICE_URL`
3. 填入刚才复制的 AI 服务地址
4. 保存（Railway 会自动重启后端服务）

---

## 第三步：部署前端（Vercel）

### 3.1 登录 Vercel
1. 打开浏览器，访问：https://vercel.com
2. 点击右上角 "Sign Up" 或 "Log In"
3. 选择 **"Continue with GitHub"**
4. 授权 Vercel 访问你的 GitHub

### 3.2 导入项目
1. 登录后，点击 **"Add New..."** → **"Project"**
2. 会显示你的 GitHub 仓库列表
3. 找到并点击 **"orzlian/my-ai-app"**
4. 点击 **"Import"**

### 3.3 配置前端项目
1. 在 "Root Directory" 中，点击 "Edit"
2. 输入：`frontend`
3. 点击 "Save"

### 3.4 配置环境变量（重要！）
在 "Environment Variables" 部分，添加两个变量：

**第一个变量：**
- Name（名称）：`VITE_API_URL`
- Value（值）：粘贴你第一步获取的后端地址（Railway 给的地址）

**第二个变量：**
- Name（名称）：`VITE_AI_URL`
- Value（值）：粘贴你第二步获取的 AI 服务地址（Railway 给的地址）

### 3.5 开始部署
1. 确认环境变量都填好了
2. 点击页面底部的 **"Deploy"** 按钮
3. 等待部署完成（通常需要 2-3 分钟）

### 3.6 获取前端地址
1. 部署完成后，Vercel 会显示一个地址，类似：`https://my-ai-app-xxx.vercel.app`
2. **这个地址就是你的网页地址！可以分享给朋友了！**

---

## ✅ 完成！

现在你的软件已经部署到网络上了！

### 测试一下
1. 打开 Vercel 给你的地址
2. 尝试注册/登录
3. 如果一切正常，就可以分享给朋友了！

---

## 🆘 遇到问题？

### 问题1：Railway 找不到 backend 文件夹
**解决：** 在服务设置中，手动设置 "Root Directory" 为 `backend`

### 问题2：部署失败
**解决：** 查看 Railway/Vercel 的日志，把错误信息告诉我

### 问题3：前端无法连接后端
**解决：** 检查环境变量是否正确配置，特别是 `VITE_API_URL`

### 问题4：AI 服务无法连接
**解决：** 检查后端的 `AI_SERVICE_URL` 环境变量是否正确

---

## 📝 重要提醒

1. **免费版限制：**
   - Railway 免费版服务会在不使用时休眠，首次访问会慢一点
   - Vercel 免费版完全够用，没有限制

2. **数据库：**
   - 数据库文件（app.db）在 Railway 上
   - 免费版重启可能会重置数据（这是正常现象）

3. **API 密钥：**
   - 用户的 Binance API 密钥会存储在数据库中
   - 确保你的 API 密钥权限设置正确（只读权限）

---

**现在开始部署吧！按照步骤一步步来，遇到任何问题随时告诉我！**

